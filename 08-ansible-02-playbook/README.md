# Playbook

В соответствии с указанными play Ansible производит выполнение следующих задач (т.к. установка и настройка производится на отдельных хостах, операции выполняются с повышением привилегий **become**:

1. Получение пакетов clickhouse.
2. Установка пакетов clickhouse.
3. Настройка удаленных подключений к серверу clickhouse.
4. Добавление базы данных и таблицы.
5. Получение пакета Vector.
6. Установка пакета Vector.
7. Настройка конфигурации Vector для отправки логов на наш сервер clickhouse.

## Group_vars
С помощью переменных в playbook передаются следующие параметры:
1. `clickhouse_version` - требуемая версия пакетов clickhouse для установки,
2. `clickhouse_database_name` - имя создаваемой БД,
3. `clickhouse_create_table` - указание имени и структуры таблицы в нашей БД, где будут хранится логи,
4. `vector_version` - требуемая версия пакета Vector для установки,
5. `vector_config` - указание настроек для генерирования логов и отправки на сервер clickhouse

## Tags
1. `clickhouse` производит установку и настройку сервера clickhouse;
2. `clickhouse_db` производит добавление базы данных и таблицы;
3. `vector` производит установку и настройку сервера vector;
4. `vector_config` производит настройку конфигурации Vector;
